{"version":3,"sources":["counter.js"],"names":["NodeList","prototype","counter","Element","count","decrease","increase","this","countKeyupHandler","event","parentElement","querySelector","value","replace","parseInt","classList","remove","add","countBlurHandler","decreaseClickHandler","increaseClickHandler","Object","toString","call","counterNum","length","Error","onkeyup","onblur","onclick"],"mappings":"AACIA,SAASC,UAAUC,QAAUC,QAAQF,UAAUC,QAAU,WAEzD,IACIE,EAAOC,EAAUC,EADjBJ,EAAUK,KAGVC,EAAoB,SAASC,GAC7B,IAAIJ,EAAWE,KAAKG,cAAcC,cAAc,aAChDJ,KAAKK,MAAQL,KAAKK,MAAMC,QAAQ,OAAQ,IACb,EAAvBC,SAASP,KAAKK,OACdP,EAASU,UAAUC,OAAO,WACnBF,SAASP,KAAKK,QAAU,IAC/BP,EAASU,UAAUE,IAAI,WACvBV,KAAKK,MAAQ,IAIjBM,EAAmB,SAAST,GACvBF,KAAKK,QACNL,KAAKK,MAAQ,IAKjBO,EAAuB,SAASV,GAChC,IAAIL,EAAQG,KAAKG,cAAcC,cAAc,UAC7CP,EAAMQ,MAAQE,SAASV,EAAMQ,OAAS,EAClCR,EAAMQ,OAAS,IACfL,KAAKQ,UAAUE,IAAI,WACnBb,EAAMQ,MAAQ,IAIlBQ,EAAuB,SAASX,GAChC,IAAIL,EAAQG,KAAKG,cAAcC,cAAc,UACzCN,EAAWE,KAAKG,cAAcC,cAAc,aAChDP,EAAMQ,MAAQE,SAASV,EAAMQ,OAAS,EACV,EAAxBE,SAASV,EAAMQ,QACfP,EAASU,UAAUC,OAAO,YAKlC,GAAgD,sBAA5CK,OAAOpB,UAAUqB,SAASC,KAAKrB,IACa,4BAA5CmB,OAAOpB,UAAUqB,SAASC,KAAKrB,GAC/B,IAAK,IAAIsB,EAAatB,EAAQuB,OAAS,EAAiB,GAAdD,EAAiBA,IAAc,CAKrE,GAJApB,EAAQF,EAAQsB,GAAYb,cAAc,UAC1CN,EAAWH,EAAQsB,GAAYb,cAAc,aAC7CL,EAAWJ,EAAQsB,GAAYb,cAAc,aAEzCG,SAASV,EAAMQ,QAAWE,SAASV,EAAMQ,OACzC,MAAM,IAAIc,MAAMnB,KAAO,iBAER,GAAfH,EAAMQ,OACNP,EAASU,UAAUE,IAAI,WAE3Bb,EAAMuB,QAAUnB,EAChBJ,EAAMwB,OAASV,EACfb,EAASwB,QAAUV,EACnBb,EAASuB,QAAUT,MAEpB,CAMH,GALAhB,EAAQF,EAAQS,cAAc,UAC9BN,EAAWH,EAAQS,cAAc,aACjCL,EAAWJ,EAAQS,cAAc,aAG7BG,SAASV,EAAMQ,QAAWE,SAASV,EAAMQ,OACzC,MAAM,IAAIc,MAAMnB,KAAO,iBAER,GAAfH,EAAMQ,OACNP,EAASU,UAAUE,IAAI,WAE3Bb,EAAMuB,QAAUnB,EAChBJ,EAAMwB,OAASV,EACfb,EAASwB,QAAUV,EACnBb,EAASuB,QAAUT","file":"../counter.min.js","sourcesContent":[";(function(){\r\n    NodeList.prototype.counter = Element.prototype.counter = function() {\r\n\r\n    var counter = this;\r\n    var count, decrease, increase;\r\n\r\n    var countKeyupHandler = function(event) {\r\n        var decrease = this.parentElement.querySelector('.decrease')\r\n        this.value = this.value.replace(/\\D+/g, '');\r\n        if (parseInt(this.value) > 1) {\r\n            decrease.classList.remove('no-drop');\r\n        } else if (parseInt(this.value) <= 1) {\r\n            decrease.classList.add('no-drop');\r\n            this.value = 1;\r\n        }\r\n    };\r\n\r\n    var countBlurHandler = function(event) {\r\n        if (!this.value) {\r\n            this.value = 1;\r\n        }\r\n    };\r\n\r\n\r\n    var decreaseClickHandler = function(event) {\r\n        var count = this.parentElement.querySelector('.count');\r\n        count.value = parseInt(count.value) - 1;\r\n        if (count.value <= 1) {\r\n            this.classList.add('no-drop');\r\n            count.value = 1;\r\n        }\r\n    };\r\n\r\n    var increaseClickHandler = function(event) {\r\n        var count = this.parentElement.querySelector('.count');\r\n        var decrease = this.parentElement.querySelector('.decrease');\r\n        count.value = parseInt(count.value) + 1;\r\n        if (parseInt(count.value) > 1) {\r\n            decrease.classList.remove('no-drop');\r\n        }\r\n\r\n    };\r\n\r\n    if (Object.prototype.toString.call(counter) === '[object NodeList]' ||\r\n        Object.prototype.toString.call(counter) === '[object HTMLCollection]') {\r\n        for (var counterNum = counter.length - 1; counterNum >= 0; counterNum--) {\r\n            count = counter[counterNum].querySelector('.count');\r\n            decrease = counter[counterNum].querySelector('.decrease');\r\n            increase = counter[counterNum].querySelector('.increase');\r\n            // count.value = (~~count.value) || 1;\r\n            if (parseInt(count.value) !== parseInt(count.value)) {\r\n                throw new Error(this + '中的count不是一个数字');\r\n            }\r\n            if (count.value == 1) {\r\n                decrease.classList.add('no-drop');\r\n            }\r\n            count.onkeyup = countKeyupHandler;\r\n            count.onblur = countBlurHandler;\r\n            decrease.onclick = decreaseClickHandler;\r\n            increase.onclick = increaseClickHandler;\r\n        }\r\n    } else {\r\n        count = counter.querySelector('.count');\r\n        decrease = counter.querySelector('.decrease');\r\n        increase = counter.querySelector('.increase');\r\n\r\n        // count.value = (~~count.value) || 1;\r\n        if (parseInt(count.value) !== parseInt(count.value)) {\r\n            throw new Error(this + '中的count不是一个数字');\r\n        }\r\n        if (count.value == 1) {\r\n            decrease.classList.add('no-drop');\r\n        }\r\n        count.onkeyup = countKeyupHandler;\r\n        count.onblur = countBlurHandler;\r\n        decrease.onclick = decreaseClickHandler;\r\n        increase.onclick = increaseClickHandler;\r\n    }\r\n}\r\n})();\r\n"]}